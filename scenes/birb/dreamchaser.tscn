
[gd_scene load_steps=6 format=3 uid="uid://dnk7i87lhkkq4"]

[ext_resource type="PackedScene" uid="uid://di6rq2k5rmx4x" path="res://scenes/birb/birb.tscn" id="1_kmfuc"]

[sub_resource type="GDScript" id="GDScript_kmfuc"]
script/source = "extends Node

@export var world_3D : Node3D
# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	$BirdPath3D/PathFollow3D/Birb.world_3D = world_3D


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
"


[sub_resource type="Curve3D" id="Curve3D_pud53"]
closed = true
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -59.9618, 0, -0.151494, 0, 0, 0, 0, 0, 0, -169.719, 0, -1.39169, 0, 0, 0, 0, 0, 0, -312.34, 0, -1.39169, 0, 0, 0, 0, 0, 0, -437.6, 0, -2.01178, 0, 0, 0, 0, 0, 0, -567.662, 0, -3.30128, 0, 0, 0, 0, 0, 0, -637.733, 0, 11.581, 0, 0, 0, 0, 0, 0, -689.821, 0, 46.3063, 0, 0, 0, 0, 0, 0, -724.547, 0, 103.355, 0, 0, 0, 0, 0, 0, -734.468, 0, 154.203, 0, 0, 0, 0, 0, 0, -730.127, 0, 201.33, 0, 0, 0, 0, 0, 0, -715.604, 0, 245.186, 0, 0, 0, 0, 0, 0, -676.538, 0, 294.793, 0, 0, 0, 0, 0, 0, -626.311, 0, 323.938, 0, 0, 0, 0, 0, 0, -553.139, 0, 337.58, 0, 0, 0, 0, 0, 0, -468.806, 0, 336.34, 0, 0, 0, 0, 0, 0, -375.792, 0, 336.96, 0, 0, 0, 0, 0, 0, -287.119, 0, 335.719, 0, 0, 0, 0, 0, 0, -195.345, 0, 336.96, 0, 0, 0, 0, 0, 0, -108.531, 0, 337.58, 0, 0, 0, 0, 0, 0, -16.834, 0, 336.693, 0, 0, 0, 0, 0, 0, 94.783, 0, 336.693, 0, 0, 0, 0, 0, 0, 203.92, 0, 337.314, 0, 0, 0, 0, 0, 0, 313.056, 0, 337.314, 0, 0, 0, 0, 0, 0, 442.036, 0, 336.073, 0, 0, 0, 0, 0, 0, 585.989, 0, 336.618, 0, 0, 0, 0, 0, 0, 758.995, 0, 337.238, 0, 0, 0, 0, 0, 0, 932.002, 0, 337.858, 0, 0, 0, 0, 0, 0, 1116.16, 0, 337.742, 0, 0, 0, 0, 0, 0, 1229.64, 0, 335.262, 0, 0, 0, 0, 0, 0, 1299.71, 0, 318.52, 0, 0, 0, 0, 0, 0, 1341.25, 0, 292.476, 0, 0, 0, 0, 0, 0, 1375.98, 0, 250.929, 0, 0, 0, 0, 0, 0, 1393.96, 0, 199.461, 0, 0, 0, 0, 0, 0, 1397.49, 0, 148.074, 0, 0, 0, 0, 0, 0, 1379.51, 0, 89.1654, 0, 0, 0, 0, 0, 0, 1345.4, 0, 46.3788, 0, 0, 0, 0, 0, 0, 1287.73, 0, 8.55302, 0, 0, 0, 0, 0, 0, 1200.3, 0, -1.9886, 0, 0, 0, 0, 0, 0, 1075.04, 0, -3.22879, 0, 0, 0, 0, 0, 0, 964.043, 0, -1.9886, 0, 0, 0, 0, 0, 0, 890.732, 0, -2.27879, 0, 0, 0, 0, 0, 0, 731.988, 0, -0.418506, 0, 0, 0, 0, 0, 0, 559.602, 0, -3.51898, 0, 0, 0, 0, 0, 0, 441.508, 0, -0.221961, 0, 0, 0, 0, 0, 0, 337.332, 0, -2.08224, 0, 0, 0, 0, 0, 0, 238.117, 0, -2.70234, 0, 0, 0, 0, 0, 0, 127.74, 0, -1.46215),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 47

[sub_resource type="GDScript" id="GDScript_47cvh"]
script/source = "extends Path3D

@export var birb_speed : float = 40.0

##Multiplier when the player is in the area
@export var birb_speed_multiplier : float = 1.5
@export var birb : Birb
var speed_multiplier : float = 1.0
var is_in_area : bool = false :
	set(new_value) :
		is_in_area = new_value
		birb.can_drop = new_value
		speed_multiplier = birb_speed_multiplier if is_in_area else 1.0
		print(\"Nouvelle vitesse : \"+str(speed_multiplier))

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass

func _physics_process(delta: float) -> void:

	$PathFollow3D.progress += birb_speed * delta * speed_multiplier


func _on_coin_drop_area_body_entered(body: Node3D) -> void:
	is_in_area = true


func _on_coin_drop_area_body_exited(body: Node3D) -> void:
	is_in_area = false
"

[sub_resource type="SphereShape3D" id="SphereShape3D_kmfuc"]
radius = 44.801

[node name="Dreamchaser" type="Node"]
script = SubResource("GDScript_kmfuc")

[node name="BirdPath3D" type="Path3D" parent="." node_paths=PackedStringArray("birb")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 15.975, 0)
curve = SubResource("Curve3D_pud53")
script = SubResource("GDScript_47cvh")
birb_speed_multiplier = 1.6
birb = NodePath("PathFollow3D/Birb")


[node name="PathFollow3D" type="PathFollow3D" parent="BirdPath3D"]
transform = Transform3D(0.0112987, 0, 0.999933, 0, 1, 0, -0.999933, 0, 0.0112987, -59.9618, 0, -0.151494)

[node name="Birb" parent="BirdPath3D/PathFollow3D" instance=ExtResource("1_kmfuc")]
transform = Transform3D(-2.49984, 0, -0.0282469, 0, 2.5, 0, 0.0282469, 0, -2.49984, 0, 0, 0)
motion_mode = 1


[node name="CoinDropArea" type="Area3D" parent="BirdPath3D/PathFollow3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.314122, 0, 27.7997)
collision_layer = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="BirdPath3D/PathFollow3D/CoinDropArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.127177, 0, 11.2552)
shape = SubResource("SphereShape3D_kmfuc")

[connection signal="body_entered" from="BirdPath3D/PathFollow3D/CoinDropArea" to="BirdPath3D" method="_on_coin_drop_area_body_entered"]
[connection signal="body_exited" from="BirdPath3D/PathFollow3D/CoinDropArea" to="BirdPath3D" method="_on_coin_drop_area_body_exited"]

